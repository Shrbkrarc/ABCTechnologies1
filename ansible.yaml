- hosts: localhost
  gather_facts: no
  become: yes
  connection: local
  collections:
    - community.docker
    - kubernetes.core
  vars:
    customnamespace: default
  tasks:
    - name: start a container
      community.docker.docker_container:
        name: abc-dockercontainer
        image: shrutir20/abc_prj_gcp:{{ lookup('env', 'BUILDNUM') }}
        state: started
        ports:
          - 2255:8080
        register: container_out
    - debug:
        var: out
    #- name: Deploying to kubernetes
    - name: Create a Deployment by reading the definition from a local file 
        command: "kubectl --kubeconfig=/etc/kubernetes/admin.conf apply -f /home/edureka/Desktop/deployment.yml"    
        register: out
    - debug:
        var: out
